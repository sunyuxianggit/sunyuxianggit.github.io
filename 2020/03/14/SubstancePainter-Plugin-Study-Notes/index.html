<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="SubstancePainter_Plugin_Study_Notes"><meta name="keywords" content="SubstancePainter"><meta name="author" content="Sun Yuxiang"><meta name="copyright" content="Sun Yuxiang"><title>SubstancePainter_Plugin_Study_Notes | SunYuxiangのBlog</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.7.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.7.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  }
} </script><meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="SunYuxiangのBlog" type="application/atom+xml">
</head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Substance-Painter-Plugin-学习笔记"><span class="toc-number">1.</span> <span class="toc-text">Substance Painter Plugin 学习笔记</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#核心思路"><span class="toc-number">1.1.</span> <span class="toc-text">核心思路</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#需要了解学习的模块"><span class="toc-number">1.2.</span> <span class="toc-text">需要了解学习的模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Qml文件"><span class="toc-number">1.2.1.</span> <span class="toc-text">Qml文件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#插件骨骼"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">插件骨骼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#定制UI"><span class="toc-number">1.2.1.2.</span> <span class="toc-text">定制UI</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Javascript-API"><span class="toc-number">1.2.1.3.</span> <span class="toc-text">Javascript API</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#例子1"><span class="toc-number">1.2.1.4.</span> <span class="toc-text">例子1</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#例子2"><span class="toc-number">1.2.1.5.</span> <span class="toc-text">例子2</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pysbs模块"><span class="toc-number">1.2.2.</span> <span class="toc-text">pysbs模块</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#例子"><span class="toc-number">1.2.2.0.1.</span> <span class="toc-text">例子</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">Sun Yuxiang</div><div class="author-info__description text-center"></div><div class="follow-button"><a href="https://github.com/sunyuxianggit" target="_blank" rel="noopener">Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">12</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">9</span></a></div></div></div><div id="content-outer"><div class="no-bg" id="top-container"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">SunYuxiangのBlog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">文章</a><a class="site-page" href="/archives">归档</a></span><span class="pull-right"></span></div><div id="post-info"><div id="post-title">SubstancePainter_Plugin_Study_Notes</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-03-14</time></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h1 id="Substance-Painter-Plugin-学习笔记"><a href="#Substance-Painter-Plugin-学习笔记" class="headerlink" title="Substance Painter Plugin 学习笔记"></a>Substance Painter Plugin 学习笔记</h1><h2 id="核心思路"><a href="#核心思路" class="headerlink" title="核心思路"></a>核心思路</h2><p><img src="/2020/03/14/SubstancePainter-Plugin-Study-Notes/2020-03-13-21-25-23.png" alt></p>
<a id="more"></a>

<h2 id="需要了解学习的模块"><a href="#需要了解学习的模块" class="headerlink" title="需要了解学习的模块"></a>需要了解学习的模块</h2><h3 id="Qml文件"><a href="#Qml文件" class="headerlink" title="Qml文件"></a>Qml文件</h3><p>文档： Substance Painter打开 Help-Docmentation-Scripting API<br><a href="https://doc.qt.io/qt-5/qtquick-index.html" target="_blank" rel="noopener">UI</a></p>
<h4 id="插件骨骼"><a href="#插件骨骼" class="headerlink" title="插件骨骼"></a>插件骨骼</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> QtQuick <span class="number">2.2</span></span><br><span class="line"><span class="keyword">import</span> Painter <span class="number">1.0</span></span><br><span class="line"></span><br><span class="line">PainterPlugin &#123;</span><br><span class="line">        <span class="comment">// starts a timer that will trigger the 'onTick' callback at regular interval</span></span><br><span class="line">        <span class="comment">// 启动一个计时器，该计时器将定期触发“ on tick”回调</span></span><br><span class="line">        tickIntervalMS: <span class="number">-1</span> <span class="comment">// -1 禁用（默认值）</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// starts a JSON server on the given port:</span></span><br><span class="line">        <span class="comment">// 在给定的端口上启动json服务器</span></span><br><span class="line">        <span class="comment">// you send javascript that will be evaluated and you get the result in JSON format</span></span><br><span class="line">        <span class="comment">//您发送将被评估的javascript，并以json格式获取结果</span></span><br><span class="line">        jsonServerPort: <span class="number">-1</span> <span class="comment">// -1 禁用（默认值）</span></span><br><span class="line"></span><br><span class="line">        Component.onCompleted: &#123;</span><br><span class="line">                <span class="comment">// Called after the object has been instantiated.</span></span><br><span class="line">                <span class="comment">// 在实例化对象之后调用。</span></span><br><span class="line">                <span class="comment">// This can be used to execute script code at startup,</span></span><br><span class="line">                <span class="comment">// 可用于在启动时执行脚本代码，</span></span><br><span class="line">                <span class="comment">// once the full QML environment has been established.</span></span><br><span class="line">                <span class="comment">// 现已建立完整的qml环境</span></span><br><span class="line">                alg.log.info(<span class="string">"Component.onCompleted"</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        onTick: &#123;</span><br><span class="line">                <span class="comment">// Do something at each tick, depending on tickIntervalMS value</span></span><br><span class="line">                <span class="comment">// 在每个滴答声中有一些东西，具体取决于滴答间隔ms值</span></span><br><span class="line">                alg.log.info(<span class="string">"onTick"</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        onConfigure: &#123;</span><br><span class="line">                <span class="comment">// Do something when the user request the plugin configuration panel</span></span><br><span class="line">                <span class="comment">// 当用户请求插件配置面板时执行某些操作</span></span><br><span class="line">                alg.log.info(<span class="string">"onConfigure"</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        onApplicationStarted: &#123;</span><br><span class="line">                <span class="comment">// Called when the application is started</span></span><br><span class="line">                <span class="comment">// 启动应用程序时调用</span></span><br><span class="line">                alg.log.info(<span class="string">"onApplicationStarted"</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        onNewProjectCreated: &#123;</span><br><span class="line">                <span class="comment">// Called when a new project is created, before the onProjectOpened callback</span></span><br><span class="line">                <span class="comment">// 在创建新项目时调用，在on project打开回调之前调用</span></span><br><span class="line">                alg.log.info(<span class="string">"onNewProjectCreated"</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        onProjectOpened: &#123;</span><br><span class="line">                <span class="comment">// Called when the project is fully loaded</span></span><br><span class="line">                <span class="comment">// 在项目完全加载时调用</span></span><br><span class="line">                alg.log.info(<span class="string">"onProjectOpened"</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        onProjectAboutToClose: &#123;</span><br><span class="line">                <span class="comment">// Called before project unload</span></span><br><span class="line">                <span class="comment">// 在项目卸载之前调用</span></span><br><span class="line">                alg.log.info(<span class="string">"onProjectAboutToClose"</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        onProjectAboutToSave: <span class="function"><span class="keyword">function</span>(<span class="params">destinationUrl</span>) </span>&#123;</span><br><span class="line">                <span class="comment">// Called before a save, 'destination_url' parameter contains the save destination</span></span><br><span class="line">                <span class="comment">// 在保存之前调用，“目标网址”参数包含保存目标</span></span><br><span class="line">                alg.log.info(<span class="string">"onProjectAboutToSave: "</span>+destinationUrl)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        onProjectSaved: &#123;</span><br><span class="line">                <span class="comment">// Called after the project was saved</span></span><br><span class="line">                <span class="comment">// 项目保存后调用</span></span><br><span class="line">                alg.log.info(<span class="string">"onProjectSaved"</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        onComputationStatusChanged: <span class="function"><span class="keyword">function</span>(<span class="params">isComputing</span>) </span>&#123;</span><br><span class="line">                <span class="comment">// Called when the state of the engine computing stacks content change.</span></span><br><span class="line">                <span class="comment">// 当引擎计算堆栈的状态更改内容时调用。</span></span><br><span class="line">                <span class="comment">// If the stack content is computed, 'isComputing' parameter will be false</span></span><br><span class="line">                <span class="comment">// 如果计算堆栈内容，则“正在计算”参数为false</span></span><br><span class="line">                alg.log.info(<span class="string">"onComputationStatusChanged: "</span>+isComputing)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        onExportAboutToStart: <span class="function"><span class="keyword">function</span>(<span class="params">maps</span>) </span>&#123;</span><br><span class="line">                <span class="comment">// Called just before the export process starts.</span></span><br><span class="line">                <span class="comment">// 在导出过程开始之前调用。</span></span><br><span class="line">                <span class="comment">// 'maps' is the list of filepaths expected to be written.</span></span><br><span class="line">                <span class="comment">// “映射”是预期要写入的文件路径的列表。</span></span><br><span class="line">                alg.log.info(<span class="string">"onExportAboutToStart: "</span>)</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">var</span> stackName <span class="keyword">in</span> maps) &#123;</span><br><span class="line">                    alg.log.info(stackName);</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">var</span> filePath <span class="keyword">in</span> maps[stackName]) &#123;</span><br><span class="line">                        alg.log.info(maps[stackName][filePath]);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// Example:</span></span><br><span class="line">                <span class="comment">// Open the 'PreviewSphere' sample, set 'C:/tmp' as export path, choose 'png' as export</span></span><br><span class="line">                <span class="comment">// 打开“预览球”示例，将“ c：/ tmp”设置为导出路径，选择“ png”作为导出</span></span><br><span class="line">                <span class="comment">// format and select the 'PBR MetalRough' config, the example above will output:</span></span><br><span class="line">                <span class="comment">// 格式化并选择“ pbr metal raw”配置，以上示例将输出：</span></span><br><span class="line"></span><br><span class="line">                <span class="comment">// onExportAboutToStart:</span></span><br><span class="line">                <span class="comment">// Sphere</span></span><br><span class="line">                <span class="comment">// c:/tmp/Sphere_Sphere_BaseColor.png</span></span><br><span class="line">                <span class="comment">// c:/tmp/Sphere_Sphere_Roughness.png</span></span><br><span class="line">                <span class="comment">// c:/tmp/Sphere_Sphere_Metallic.png</span></span><br><span class="line">                <span class="comment">// c:/tmp/Sphere_Sphere_Normal.png</span></span><br><span class="line">                <span class="comment">// c:/tmp/Sphere_Sphere_Height.png</span></span><br><span class="line"></span><br><span class="line">                <span class="comment">// Please note the 'Opacity' and 'Emissive' maps are not listed here because they</span></span><br><span class="line">                <span class="comment">// 请注意，此处未列出“不透明”和“发射”地图，因为它们</span></span><br><span class="line">                <span class="comment">// can not be exported with this sample while the actual export will warn about it.</span></span><br><span class="line">                <span class="comment">// 不能与该样品一起出口，但实际出口会发出警告。</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        onExportFinished: <span class="function"><span class="keyword">function</span>(<span class="params">status, maps</span>) </span>&#123;</span><br><span class="line">                <span class="comment">// Called right after the export process ends.</span></span><br><span class="line">                <span class="comment">// 在导出过程结束后立即调用</span></span><br><span class="line">                <span class="comment">// 'status' is the error status returned by the process. Available values are:</span></span><br><span class="line">                <span class="comment">// “状态”是进程返回的错误状态。,可用值为：</span></span><br><span class="line">                <span class="comment">// - Export.Status_Ok</span></span><br><span class="line">                <span class="comment">// - Export.Status_Warn</span></span><br><span class="line">                <span class="comment">// - Export.Status_Error</span></span><br><span class="line">                <span class="comment">// - Export.Status_Canceled</span></span><br><span class="line">                <span class="comment">// 'maps' is the list of filepaths effectively exported.</span></span><br><span class="line">                <span class="comment">// “映射”是有效导出的文件路径的列表。</span></span><br><span class="line">                alg.log.info(<span class="string">"onExportFinished: "</span>)</span><br><span class="line">                <span class="keyword">if</span> (status != Export.Status_Ok) &#123;</span><br><span class="line">                    alg.log.error(<span class="string">"Export failed."</span>)</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">var</span> stackName <span class="keyword">in</span> maps) &#123;</span><br><span class="line">                        alg.log.info(stackName);</span><br><span class="line">                        <span class="keyword">for</span> (<span class="keyword">var</span> filePath <span class="keyword">in</span> maps[stackName]) &#123;</span><br><span class="line">                            alg.log.info(maps[stackName][filePath]);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Plugin meta data:<br>Information about the plugin can be provided by creating a plugin.json file in the plugin directory. Available properties are:<br>可以通过在plugin目录中创建一个plugin.json文件来提供有关该插件的信息。,可用属性为：<br>description: plugin description, displayed in the plugin about dialog.<br>url: project homepage, displayed in the plugin about dialog. Warning, the scheme is mandatory to create a clickable link.<br>version: plugin version.<br>license: plugin license.<br>min_api_version: required minimal scripting API version.<br>Example:<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">        <span class="string">"description"</span>: <span class="string">"This is a sample plugin"</span>,</span><br><span class="line">        <span class="string">"url"</span>: <span class="string">"https://www.allegorithmic.com"</span>,</span><br><span class="line">        <span class="string">"version"</span>: <span class="string">"0.1.0"</span>,</span><br><span class="line">        <span class="string">"license"</span>: <span class="string">"&lt;a href=\"https://opensource.org/licenses/MIT\"&gt;MIT&lt;/a&gt;"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="定制UI"><a href="#定制UI" class="headerlink" title="定制UI"></a>定制UI</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> QtQuick <span class="number">2.2</span></span><br><span class="line"><span class="keyword">import</span> Painter <span class="number">1.0</span></span><br><span class="line"></span><br><span class="line">PainterPlugin &#123;</span><br><span class="line">        <span class="comment">// 在实例化对象之后调用。</span></span><br><span class="line">        <span class="comment">// 可用于在启动时执行脚本代码，</span></span><br><span class="line">        <span class="comment">// 建立环境</span></span><br><span class="line">        Component.onCompleted: &#123;</span><br><span class="line">                <span class="comment">// 创建一个toolbar 按钮</span></span><br><span class="line">                <span class="keyword">var</span> t = alg.ui.addToolBarWidget(<span class="string">"dock.qml"</span>);</span><br><span class="line">                t.rectangle.color = <span class="string">"blue"</span></span><br><span class="line">                t = alg.ui.addToolBarWidget(<span class="string">"dock.qml"</span>);</span><br><span class="line">                t.rectangle.color = <span class="string">"green"</span></span><br><span class="line">                t = alg.ui.addToolBarWidget(<span class="string">"dock.qml"</span>);</span><br><span class="line">                t.rectangle.color = <span class="string">"yellow"</span></span><br><span class="line">                t = alg.ui.addToolBarWidget(<span class="string">"dock.qml"</span>);</span><br><span class="line">                t.rectangle.color = <span class="string">"purple"</span></span><br><span class="line">                <span class="comment">// 创建停靠小部件</span></span><br><span class="line">                alg.ui.addDockWidget(<span class="string">"dock.qml"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> QtQuick <span class="number">2.3</span></span><br><span class="line"><span class="keyword">import</span> QtQuick.Window <span class="number">2.2</span></span><br><span class="line"><span class="keyword">import</span> QtQuick.Layouts <span class="number">1.2</span></span><br><span class="line"></span><br><span class="line">Item &#123;</span><br><span class="line">        width: <span class="number">24</span></span><br><span class="line">        height: <span class="number">24</span></span><br><span class="line">        objectName: <span class="string">"My plugin UI"</span></span><br><span class="line">        property alias rectangle: rect</span><br><span class="line"></span><br><span class="line">        Rectangle &#123;</span><br><span class="line">                id: rect</span><br><span class="line">                anchors.fill: parent</span><br><span class="line">                color: <span class="string">"red"</span></span><br><span class="line">                MouseArea &#123;</span><br><span class="line">                        id: mouseArea</span><br><span class="line">                        anchors.fill: parent</span><br><span class="line">                        onClicked: &#123;</span><br><span class="line">                                <span class="keyword">var</span> ok = alg.mapexport.showExportDialog();<span class="comment">//打开导出窗口  alg是指Javascript API</span></span><br><span class="line">                                <span class="keyword">if</span> (ok) &#123;</span><br><span class="line">                                        alg.log.info(<span class="string">"Export successful!"</span>)</span><br><span class="line">                                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                                        alg.log.warn(<span class="string">"Export cancelled!"</span>)</span><br><span class="line">                                &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Javascript-API"><a href="#Javascript-API" class="headerlink" title="Javascript API"></a>Javascript API</h4><h4 id="例子1"><a href="#例子1" class="headerlink" title="例子1"></a>例子1</h4><p>substance painter  hello world 窗口</p>
<ul>
<li>首先需要有一个定义主入口点的qml文件main. </li>
</ul>
<ol>
<li>C:\Users\sunyuxiang\Documents\Allegorithmic\Substance Painter\plugins</li>
<li>在此处创建一个名为“ HelloPlugin”的文件夹 </li>
<li>在插件内，创建两个文件  <pre><code>* plugin.json 
* main.qml </code></pre></li>
<li>打开main.qml文件写入</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> QtQuick <span class="number">2.2</span></span><br><span class="line"><span class="keyword">import</span> Painter <span class="number">1.0</span></span><br><span class="line"></span><br><span class="line">PainterPlugin </span><br><span class="line">&#123;</span><br><span class="line">        Component.onCompleted: </span><br><span class="line">        &#123;</span><br><span class="line">                alg.log.info(<span class="string">"hello world!"</span>)<span class="comment">//注意这里，alg.log.info()等于python里面的print()</span></span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>填写JSON文件：</li>
</ul>
<ol>
<li>JSON文件包含插件的元数据，在这里显示.<br><img src="/2020/03/14/SubstancePainter-Plugin-Study-Notes/2020-03-06-10-45-09.png" alt><br><img src="/2020/03/14/SubstancePainter-Plugin-Study-Notes/2020-03-06-10-43-52.png" alt></li>
<li>我们知道json文件是键值对,观察一下现有插件的json文件,然后修改一后面的值改为.<br><img src="/2020/03/14/SubstancePainter-Plugin-Study-Notes/2020-03-06-10-47-53.png" alt></li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"description"</span>: <span class="string">"This is a sample plugin to print hello world"</span>,</span><br><span class="line">    <span class="string">"url"</span>: <span class="string">"https://test"</span>,</span><br><span class="line">    <span class="string">"version"</span>: <span class="string">"0.1.0"</span>,</span><br><span class="line">    <span class="string">"license"</span>: <span class="string">"&lt;a href=\"https://opensource.org/licenses/MIT\"&gt;MIT&lt;/a&gt;"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>然后打开substance painter</li>
</ul>
<ol>
<li>可以看到log文件已经打印出了hello world<br><img src="/2020/03/14/SubstancePainter-Plugin-Study-Notes/2020-03-06-10-56-41.png" alt></li>
<li>plugins下的对应插件名字下面的about也可以正常工作</li>
<li>现在 我们可以看到插件的加载，还可以看到plugin.json文件的关于窗口信息.</li>
</ol>
<ul>
<li>添加一个窗口</li>
</ul>
<ol>
<li>在我们的HelloPlugin目录中创建一个HelloWorldWindow.qml.</li>
<li>编辑文件，添加代码来定义一个简单的窗口。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import AlgWidgets 1.0 &#x2F;&#x2F;窗口类导入</span><br><span class="line"></span><br><span class="line">AlgWindow</span><br><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F; 属性就像对象类型上的变量</span><br><span class="line">    id: window&#x2F;&#x2F;对应 main.qml的id 这个id很有用，因为它允许我们在插件的其他位置引用该对象，访问其可见性之类的属性。  </span><br><span class="line">    title: &quot;hello world window&quot;</span><br><span class="line">    visible: true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>现在，我们有一个简单的窗口，但是在看到窗口之前，我们需要在main.qml文件中实例化它。 </li>
</ul>
<ol>
<li>编辑main.qml<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> QtQuick <span class="number">2.2</span></span><br><span class="line"><span class="keyword">import</span> Painter <span class="number">1.0</span></span><br><span class="line"></span><br><span class="line">PainterPlugin </span><br><span class="line">&#123;       </span><br><span class="line">        HelloWorldWindow<span class="comment">// 在这里声明一个window，HelloWorldWindow指向HelloWorldWindow.qml</span></span><br><span class="line">        &#123;</span><br><span class="line">                id: <span class="built_in">window</span><span class="comment">//对应 HelloWorldWindow.qml的id</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Component.onCompleted: </span><br><span class="line">        &#123;</span><br><span class="line">                alg.log.info(<span class="string">"hello world!"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>现在打开substance painter 禁用插件在启用插件就会看到该窗口弹出，这是因为在加载插件时首先实例化该窗口（？），我们稍后将解决此问题。 </li>
</ol>
<ul>
<li>创建一个按钮：</li>
</ul>
<ol>
<li>接下来创建一个按钮来替代禁用/启用</li>
<li>打开“ HelloWorldWindow.qml”文件。</li>
<li>我们将添加三件事： <pre><code>* 一系列的布局元素。 
* 一个标签。 
* 一个按钮</code></pre></li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> AlgWidgets <span class="number">1.0</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">//下面这些模块是UI布局需要的</span></span><br><span class="line"><span class="keyword">import</span> QtQuick <span class="number">2.7</span></span><br><span class="line"><span class="keyword">import</span> QtQuick.Layouts <span class="number">1.3</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">"."</span></span><br><span class="line"></span><br><span class="line">AlgWindow</span><br><span class="line">&#123;</span><br><span class="line">    id: <span class="built_in">window</span><span class="comment">//对应 main.qml的id</span></span><br><span class="line">    title: <span class="string">"hello world window"</span></span><br><span class="line">    visible: <span class="literal">true</span><span class="comment">//注意这里</span></span><br><span class="line"></span><br><span class="line">    ColumnLayout <span class="comment">//也可以用 RowLayout这里定义了一系列的布局元素 </span></span><br><span class="line">    &#123;</span><br><span class="line">        id: horizontalLayout</span><br><span class="line">        anchors.fill: parent</span><br><span class="line"></span><br><span class="line">        Rectangle <span class="comment">//这里定义了一系列的布局元素 </span></span><br><span class="line">        &#123;</span><br><span class="line">            id: buttonBar</span><br><span class="line">            anchors.left: parent.left</span><br><span class="line">            anchors.right: parent.right</span><br><span class="line"></span><br><span class="line">            ColumnLayout<span class="comment">//也可以用 RowLayout这里定义了一系列的布局元素 </span></span><br><span class="line">            &#123;</span><br><span class="line">                anchors.fill:parent</span><br><span class="line"></span><br><span class="line">                AlgLabel<span class="comment">//一个标签</span></span><br><span class="line">                &#123;</span><br><span class="line">                    id: buttonLabel</span><br><span class="line">                    font.pixelSize: <span class="number">14</span></span><br><span class="line">                    font.bold: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">                    text: <span class="string">"Press Me"</span></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                AlgButton<span class="comment">//一个按钮</span></span><br><span class="line">                &#123;</span><br><span class="line">                    text: <span class="string">"Say Hello!"</span></span><br><span class="line">                    <span class="comment">//Layout.preferredWidth: Style.widgets.buttonWidth</span></span><br><span class="line"></span><br><span class="line">                    onClicked:</span><br><span class="line">                    &#123;</span><br><span class="line">                        alg.log.info(<span class="string">"hello World"</span>)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<pre><code>1. QML窗口是使用一系列嵌套的布局对象创建的-为了达到我们的目的，我们将使用列，矩形和行。 
2. 我们需要添加其他导入语句来访问这些对象类型-QtQuick和QtQuick.Layouts。
3. 该列表示总体布局-元素将按照添加顺序堆叠在此形状中。 
4. 矩形允许我们使用子布局填充此列的分区。 
5. 最后，行布局允许我们添加将按照添加顺序从左到右呈现的元素。 
6. 在行布局中添加AlgLabel和AlgButton将两个新元素添加到我们的窗口中。 
7. 最后，为按钮定义“ onClicked”事件将替换启动时登录main.qml的位置。 </code></pre><ul>
<li><p>重新加载脚本：<br>可以使用painter中的Plugins-&gt; HelloPlugin-&gt; Reload  菜单即时重新加载脚本。在后面debug和尝试过程中这个超级有用，避免了我们要重新开关软件。</p>
</li>
<li><p>将插件添加到工具栏：</p>
</li>
</ul>
<ol>
<li>现在如果关闭插件窗口，则必须通过reload插件才能再次打开插件窗口。 </li>
<li>让我们在工具栏上添加一个按钮，来替代每次reload调用窗口。</li>
<li>工具栏中的按钮将非常简单，要做的就是在按下插件窗口时切换可见性。 </li>
<li>首先，我们将通过改变visible值的true改为false,让插件窗口不会加载自动弹出。</li>
<li>创建一个名为“ toolbar.qml ” 的新文件，并且与我们之前所做的类似,仅一排，带有一个按钮。<br>比较重要的是-插件加载时，属性变量“ windowReference”将由我们的插件填充。<br>由于windowReference在本地以null开头，因此我们稍后将对其的调用包装在try / catch块中。<br>如果脚本中其他地方的内容使我们无法创建窗口，那么这将阻止崩溃，我们可以将信息打印到控制台。 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">import QtQuick 2.7</span><br><span class="line">import QtQuick.controls 2.0</span><br><span class="line">import AlgWidgets 1.0</span><br><span class="line"></span><br><span class="line">Row &#x2F;&#x2F;现在是横向的如果需要侧边的话就是AlgToolBarButton</span><br><span class="line">&#123;</span><br><span class="line">    property var windowReference : null</span><br><span class="line"></span><br><span class="line">    Button</span><br><span class="line">    &#123;</span><br><span class="line">        id: rect</span><br><span class="line">        width: 30</span><br><span class="line">        height: 30</span><br><span class="line"></span><br><span class="line">        onClicked:</span><br><span class="line">        &#123;</span><br><span class="line">            try </span><br><span class="line">            &#123;</span><br><span class="line">                windowReference.visible &#x3D; true</span><br><span class="line">            &#125;</span><br><span class="line">            catch(err) </span><br><span class="line">            &#123;</span><br><span class="line">                alg.log.exception(err)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ul>
<li>最后，在“ main.qml”文件中，我们将添加一个新的工具栏小部件，该小部件将把“ toolbar.qml”实例化为工具栏上的按钮。<br>我们还使用其ID将HelloWorldWindow实例分配给工具栏按钮中的windowReference变量。 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> QtQuick <span class="number">2.2</span></span><br><span class="line"><span class="keyword">import</span> Painter <span class="number">1.0</span></span><br><span class="line"></span><br><span class="line">PainterPlugin </span><br><span class="line">&#123;</span><br><span class="line">        <span class="comment">// 在这里声明一个window，HelloWorldWindow指向HelloWorldWindow.qml</span></span><br><span class="line">        HelloWorldWindow</span><br><span class="line">        &#123;</span><br><span class="line">                id: <span class="built_in">window</span><span class="comment">//对应 HelloWorldWindow.qml的id</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Component.onCompleted: </span><br><span class="line">        &#123;</span><br><span class="line">                <span class="keyword">var</span> qmToolbar = alg.ui.addWidgetToPluginToolBar(<span class="string">"toolbar.qml"</span>)</span><br><span class="line">                qmToolbar.windowReference = <span class="built_in">window</span><span class="comment">//这里调用了window</span></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>这就是向Substance Painter添加基本插件的小例子.</li>
<li>ref：<a href="http://peterhanshawart.blogspot.com/2017/11/making-hello-world-substance-painter.html" target="_blank" rel="noopener">http://peterhanshawart.blogspot.com/2017/11/making-hello-world-substance-painter.html</a></li>
</ul>
<h4 id="例子2"><a href="#例子2" class="headerlink" title="例子2"></a>例子2</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">AlgWindow</span><br><span class="line">&#123;</span><br><span class="line">    Item</span><br><span class="line">    &#123;</span><br><span class="line">        Item </span><br><span class="line">        &#123;</span><br><span class="line">            Row</span><br><span class="line">            &#123;</span><br><span class="line">                Alglabel &#123;&#125;</span><br><span class="line">                AlgTextInput &#123;&#125;</span><br><span class="line">            &#125;</span><br><span class="line">            Row</span><br><span class="line">            &#123;</span><br><span class="line">                AlgComboBox &#123;&#125;</span><br><span class="line">                AlgLabel &#123;&#125;</span><br><span class="line">                AlgComboBox &#123;&#125;</span><br><span class="line">            &#125;</span><br><span class="line">            Row</span><br><span class="line">            &#123;</span><br><span class="line">                AlgCheckBox &#123;&#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        GridView</span><br><span class="line">        &#123;</span><br><span class="line">            ListElement &#123;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">        Item </span><br><span class="line">        &#123;</span><br><span class="line">            Row </span><br><span class="line">            &#123;</span><br><span class="line">                Rectangle &#123;&#125;</span><br><span class="line">                FileDialog &#123;&#125;</span><br><span class="line">                AlgButton &#123;&#125;</span><br><span class="line">                AlgButton &#123;&#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="pysbs模块"><a href="#pysbs模块" class="headerlink" title="pysbs模块"></a>pysbs模块</h3><p><a href="https://docs.substance3d.com/sat" target="_blank" rel="noopener">pysbs文档链接</a></p>
<p>pysbs模块介绍：pysbs是.sbs文件的Python API，pysbs提供了无需使用Substance Designer应用程序即可生成或修改物质的方法，只需使用Python编写脚本即可。</p>
<p>它有两个主要组件:</p>
<ul>
<li>命令行工具.这是一组命令行工具，用于烘焙网格物体的图，对物质进行简单的修改，创建物质档案并绘制图。</li>
<li>Pysbs-Python API，Python API是一个python软件包，用于读取和修改sbs文件，例如从多种物质组装复合材料或在文件中批量重命名节点。</li>
</ul>
<h5 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h5><p>批量修改sbs文件的图表尺寸</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pysbs <span class="keyword">import</span> context, substance, sbsenum</span><br><span class="line"></span><br><span class="line">sbs_mtls = [] <span class="comment"># Your list of sbs files to process.</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">set_sbs_graph_to_relative</span><span class="params">(sbs_path)</span>:</span></span><br><span class="line">    <span class="comment"># Build doc.</span></span><br><span class="line">    ctx = context.Context()</span><br><span class="line">    sbs_doc = substance.SBSDocument(ctx, sbs_path)</span><br><span class="line">    sbs_doc.parseDoc()</span><br><span class="line">   </span><br><span class="line">    <span class="comment"># Get your graph.</span></span><br><span class="line">    graph = sbs_doc.getSBSGraphList()[<span class="number">0</span>]</span><br><span class="line">   </span><br><span class="line">    <span class="comment"># Change the outputsize inheritance value.</span></span><br><span class="line">    <span class="comment"># Bug: The aRelativeTo argument doesn't appear to do anything.</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment"># https://docs.substance3d.com/sat/pysbs-python-api/api-content/libraries/sbsenum</span></span><br><span class="line">    graph.setBaseParameterValue(</span><br><span class="line">        aParameter=sbsenum.CompNodeParamEnum.OUTPUT_SIZE,</span><br><span class="line">        aParamValue=[sbsenum.OutputSizeEnum.SIZE_1, sbsenum.OutputSizeEnum.SIZE_1],</span><br><span class="line">        aRelativeTo=sbsenum.ParamInheritanceEnum.PARENT</span><br><span class="line">    )</span><br><span class="line">   </span><br><span class="line">    <span class="comment"># Save pkg.</span></span><br><span class="line">    sbs_doc.writeDoc()</span><br><span class="line">   </span><br><span class="line"><span class="keyword">for</span> pkg <span class="keyword">in</span> sbs_mtls:</span><br><span class="line">    set_sbs_graph_to_relative(pkg)</span><br></pre></td></tr></table></figure></div></article><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/SubstancePainter/">SubstancePainter</a></div><nav id="pagination"><div class="next-post pull-right"><a href="/2020/03/10/Blender%E8%84%9A%E6%9C%AC%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><span>Blender脚本学习笔记</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2020 By Sun Yuxiang</div><div class="framework-info"><span>驱动 - </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody" target="_blank" rel="noopener"><span>Melody</span></a></div><div class="footer_custom_text">Hi, welcome to my <a href="https://sunyuxianggit.github.io/" target="_blank" rel="noopener">blog</a>!</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.7.0"></script><script src="/js/fancybox.js?version=1.7.0"></script><script src="/js/sidebar.js?version=1.7.0"></script><script src="/js/copy.js?version=1.7.0"></script><script src="/js/fireworks.js?version=1.7.0"></script><script src="/js/transition.js?version=1.7.0"></script><script src="/js/scroll.js?version=1.7.0"></script><script src="/js/head.js?version=1.7.0"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>
---
title: GAMES101-现代计算机图形学入门-闫令琪(6-10)
date: 2020-03-24 19:34:27
tags: computer graphics
---

## 第六节
##### 上节课复习
![](2020-03-25-10-26-53.png)
MVP（model模型变换- view跟随摄影机变换到相对（0，0，0）位置 - project 投影变换（-1，1的3次方的空间））变换之后在进行视口变换（viewport，-1，1的3次方的空间变换到分辨率空间)
##### Antialiasing 抗锯齿
根据上节课的判断，我们可以得到某些像素带你的中心在三角形内部，某些不在，如图：
![](2020-03-27-11-05-28.png)
我们想得到的是这样的三角形：
![](2020-03-27-11-05-50.png)
结果把对应的像素填充完得到这样的三角形：
![](2020-03-27-11-05-36.png)
Aliasing 走样/锯齿
![](2020-03-27-11-08-05.png)
我们要想抗锯齿首先要明白锯齿是怎么来的。
![](2020-03-27-11-09-57.png)
采样是图形学中广泛存在的做法，光栅化的过程，其实就是在屏幕空间用一系列离散的点（也就是像素的中心）进行是否在三角形内这么一个函数的采样。
![](2020-03-27-11-14-26.png)
照片也是采样：一副照片，就是说所有到达这个感光元件的所在平面的光学信息，我们把它们离散成一系列图片上的像素的过程。

![](2020-03-27-11-21-37.png)
采样不光可以发生在不同的未知，也可以发生在不同的时间。
视频就是在时间上的采样。
![](2020-03-27-11-23-38.png)
采样是广泛存在的，采样的问题也是广泛存在的。
Artifacts(瑕疵)
![](2020-03-27-11-27-36.png)
采样的问题：
1. 锯齿
2. 摩尔纹（把采样的过程的奇数行和奇数列去掉在对起来就会产生这样的问题）
3. 顺时针变成逆时针(采样速度太慢)
信号变化太快，导致采样速度跟不上。


![](2020-03-27-11-35-31.png)
如何做抗锯齿，在采样之前先做个模糊或者滤波。
![](2020-03-27-11-36-16.png)
![](2020-03-27-11-40-29.png)
这样操作完之后效果还不错：
![](2020-03-27-14-39-16.png)
如果是先采样后模糊呢？结果是不行。
![](2020-03-27-14-40-02.png)

为什么?
为什么说采样的速度的跟不上信号变换的速度就会产生走样，  
为什么先去做采样，后做模糊操作达不到反走样效果  

为了解释为什么需要引入频率  
##### Frequency 频率：
![](2020-03-27-16-57-07.png)
最简单的正弦余弦波： 差别就是相位不一样。
![](2020-03-27-16-58-16.png)
通过调整系数，会得到不同的余弦波，它们的不同在于频率不同，这里我们定义一个事情，cos2pifx, f就是频率，f就可以定义频率变换有多快，周期就是频率的倒数。
为什么要介绍这些呢？
微积分里面傅里叶基数展开：任何一个周期函数，都可以写成一系列正弦和余弦函数的线性组合以及一个常数项  
![](2020-03-27-17-23-50.png)
![](2020-03-27-17-30-47.png)
所谓傅里叶变换，其实就是把函数给变成不同频率的段，并且把这些段显示出来。  
![](2020-03-27-17-38-16.png)
小例子，相同的采样频率，对应上不同的变化频率，采样结果反应实际的效果越差。  
由此我们可以看出来，采样的频率应该跟随被采样的频率变换。

![](2020-03-27-17-45-11.png)
如果同一个采样点，采样两种截然不同的函数，结果是一致的，像这样的情况就叫走样/混叠。
##### Filtering 滤波：
所谓滤波，就是去掉一系列特定的频率。  
傅里叶变换可以帮住我们理解这样事情。  
![](2020-03-27-17-50-02.png)

左边的图经过傅里叶变换可以变成右边这幅图。  
图像空间变成频率空间。  
频率空间怎么理解呢，中心我们把它理解为最低频的区域，边缘是最高频的区域。在不同频率上有多少信息我们用亮度表示，可以看出这幅图大多数信息集中在低频上。对于自然的图片一般都是这样的。为什么会有水平和竖直的道呢?简单说原因是我们在分析一个信号时会认为它是一个周期性重复信号，对于不周期重复的信号，我们认为它是Tiling的，那我们会发现，正常的图片的左右和上下是会发生剧烈变换的，就会产生一个极高的高频。  
图形的频率信息可以理解为图像相邻像素间色彩的变化。  
傅里叶变换能够可以让我看到任何图像（任何信号）在各个不同的频率上长什么样，也叫做频谱图。  

![](2020-03-27-18-07-23.png)
滤波就是去掉一些频率的内容。把低频去掉（就是把图像中变化缓慢的色块去掉）， 在反傅里叶变换，可以得到一张显示物体的边界的图片。  
这种滤波叫高通滤波（只有高频信息可以通过）。  
为什么说高频信息对应上人物边界上呢，因为边界就是信息变化剧烈的地方，  

![](2020-03-27-18-41-46.png)
把高频信息抹掉，只留下低频信息，在反傅里叶变换变回图片，可以得到一张模糊的图片  
这种滤波叫低通滤波（只有低频信息可以通过）。  
意味着边界被去掉了，模糊了。  

![](2020-03-27-18-46-37.png)
保留了某一段频段，我们就会得到这样的效果。  

![](2020-03-27-19-07-20.png)
滤波就去掉某一特定频率的信息。  
滤波又等于平均又等于卷积。  
![](2020-03-27-19-23-41.png)


##### Convolution 卷积：
![](2020-03-27-20-40-01.png)
![](2020-03-27-20-42-54.png)
什么是卷积？  
其实就是加权平均。  
所谓卷积是，在原始的信号附近取若干数用某一种滤波器的平均（图形学上简化的卷积）。  
![](2020-03-27-20-45-50.png)
时域的卷积等于频域的乘积。(这块没搞懂，但是好像不影响)  
例子：  
![](2020-03-27-20-54-51.png)
任何一个像素都是它周围3*3像素的平均  
拿到一幅图，先把它做傅里叶变换变成频域上的结果，3*3的卷积核也做傅里叶变换可以变成频域上，时域上做的卷积（上排乘起来），对应到频域上就是把两个信号乘起来，我们就发现大量的信息都变成黑的，只有中心一部分有信息，就像过了一个低通滤波。  
![](2020-03-27-21-05-48.png)
卷积核，3*3乘以1/9，不乘亮度就爆了。等于一个像素+旁边八个像素在除以9。我们管他叫低通滤波器。
![](2020-03-27-21-10-59.png)
![](2020-03-27-21-11-43.png)
如果这个box变大变小呢？
更大box做卷积操作，得到的结果越模糊，频域上的结果就超级小，更小的box，比像素还小，等于没做滤波，把所有频率都留下来了，
51.27
##### Visibility/occlusion

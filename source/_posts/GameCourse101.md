---
title: GameCourse101
date: 2020-03-10 19:14:04
tags: computer graphics
---


计算机图形学入门 课程学习笔记
## 第一节 引入
怎么判断一个游戏画面的水平，有一个很简单的方法就是画面亮不亮。
## 第二节 线性代数
### 向量

向量是带有方向的量  
重要的两个量是方向和长度  
![](GameCourse101/2020-03-08-12-49-03.png)  
<!-- more -->
数学： 向量  
物理： 矢量  
向量长度：  
![](GameCourse101/2020-03-08-12-49-24.png)  
向量加法（求和）：  
几何上  
![](GameCourse101/2020-03-08-12-49-38.png)  
数学上  
![](GameCourse101/2020-03-08-12-49-58.png)  
我们把向量表示成直角坐标系这种形式是有助于计算向量的长度的。  

#### 向量的点乘和叉乘  
向量更广泛的用法  
![](GameCourse101/2020-03-08-12-50-12.png)  

##### 点乘  
![](GameCourse101/2020-03-08-12-50-25.png)  
左边是两个向量，右边是一个数字。  
如果两个向量都是单位向量，那么它们点乘的结果就是余弦的值。  

![](GameCourse101/2020-03-08-12-58-31.png)  
点乘既然是一种运算，运算法则都会满足一些性质。  
交换律 结合律 分配律  

![](GameCourse101/2020-03-08-13-08-11.png)  
如果是在坐标系下，就跟简单。  

![](GameCourse101/2020-03-08-13-02-30.png)  
1. 点乘在图形学最重要的作用就是找到两个向量的夹角。  
比如 光从哪个地方射过来（向量）物体表面法线是什么样的（向量）我们从哪里看（向量）
2. 第二个重要作用就是找到一个向量的投影到另一个向量是长什么样的。  
投影算出来有什么好处呢？ 我们可以把一个向量分解成两个向量，一个平行一个垂直。这样可以帮助我们把任意向量分解到任意坐标轴。  
    ![](GameCourse101/2020-03-08-13-17-01.png)
3. 在图形学里，我们还可以根据点乘的结果判定两个向量是否接近是否远离。
4. 向量点乘还可以告诉大家一个前与后的信息，如图（向量a和向量b点乘为正值且接近1，向量a和向量c点乘为负值，如果有一个向量跟向量a一样，那点乘结果为1，如果有一个向量正好在虚线上，那点乘的值为0，如果跟向量a正好相反，那点乘结果为-1）  
![](GameCourse101/2020-03-08-13-44-08.png)  

##### 叉乘（叉积）  
叉乘是给定两个向量计算出同时垂直与这两个向量的新的向量，另外同时垂直这两个向量也就是必然垂直这两个向量形成的平面
![](GameCourse101/2020-03-08-13-57-13.png)
右手螺旋定则（DirectX是右手，openGL是左手），伸出右手，除了拇指以外的四个手指比作向量a，向内握紧比作向量a向向量b运动，那么大拇指就是叉乘的结果。xy，
向量的叉乘并不满足交换律
向量的叉积还有一个作用是我们利用它来建立一个三维空间中的直角坐标系
![](GameCourse101/2020-03-08-14-04-16.png)  
几何：
![](GameCourse101/2020-03-08-14-36-32.png)  

叉积怎么算，有什么用处：
![](GameCourse101/2020-03-08-14-37-55.png)
特别重要 

![](GameCourse101/2020-03-08-14-38-58.png)
1. 判定左和右  
如图左侧，XY为平面，通过右手螺旋定则，Z为朝向我们自身的向量，如果想判断向量b在向量a左侧还是右侧（什么是左侧右侧? 从向量a顺时针旋转到达向量b为左侧，逆时针为右侧），在这里根据图示很容易看出来向量b是在向量a的左侧，如果用数字表示就是 向量a叉乘向量b得到的结果是正值（指向身体）就说明向量b在向量a的左侧，如果向量b叉乘向量a得到的结果是负值（指向身体外侧），那就说明向量a在向量b右侧，
2. 判定内与外  
如图右侧，先判断向量AP是否在向量AB的左侧，在判断向量BP是否在向量BC的左侧，在判断向量AP是否在ac的左侧，如果都是在左侧就说明点P在三角形内部，否则肯定有一个判断是在右侧。
这里假设了ABC三个点是逆时针排布，如果换成顺时针也没有问题，只不过是都在左侧。  
所以我们可以忽略三角形的排布顺序，只要三个边左或者右保持一致就说明点在三角形内部。这点非常重要，是光栅化的基础（用来判断像素是否在三角形的内部）。



#### 向量定义坐标系  
![](GameCourse101/2020-03-08-15-51-31.png)
向量叉乘可以定义一些互相垂直的轴，就会形成坐标系如图。  
![](GameCourse101/2020-03-08-15-52-25.png)  
这里顶一个uvw坐标系，三个向量单位长度都为1，互相垂直，给你u和v 叉乘得到w。
我们可以利用投影把任意一个向量分解到三个轴上去，利用点乘，因为什么呢？向量P点乘向量U，等于是向量P的长度乘以向量U的长度在乘以cosθ，向量U又恰好是单位向量为1，等于是向量P的长度乘以cosθ，根据下图三角函数，就会得出向量P在向量U上的投影，同理获得向量P在向量V和向量W上的投影，有了这三个投影就可以获得坐标系下的这个向量。
![](GameCourse101/2020-03-08-16-07-00.png)  
cosA = c/b  


### 矩阵
![](GameCourse101/2020-03-08-16-47-04.png)
**在图像学里，变换就是矩阵的最大应用。** 
![](GameCourse101/2020-03-08-20-44-32.png)  
##### 矩阵乘以和加上一个常量就是把矩阵的每个元素乘以和加上一个常量.
##### 矩阵相乘  
![](GameCourse101/2020-03-08-20-53-06.png)  
矩阵乘矩阵必须要符合条件才能乘，如图必须第一个矩阵的列数和第二个矩阵的行数相同相乘才有意义。  
**关于新得到的矩阵每一个元素都是什么，有不同的数学定义，这个地方比较不容易记住，这里给大家提供一个容易记得方法，比如左下角这个8，他的坐标是三行一列，这里三行对应第一个矩阵（0，4），一列对应第二个矩阵（3，2），这两个向量点乘。**  
![](GameCourse101/2020-03-08-21-50-50.png)  
矩阵乘法是没有交换律的，但是矩阵是由结合律和分配律。  

##### 矩阵乘向量
![](GameCourse101/2020-03-08-21-53-53.png)
>一个矩阵如何和一个向量乘？当我们认为向量是列向量就有意义了（也就是说M永远为1）。    

*这是最重要的核心。*
下面表示一个2D向量按Y轴镜像的操作。

##### 矩阵转置
![](GameCourse101/2020-03-08-22-01-06.png)
性质： 如果要乘两个矩阵在转置好比相对后一个矩阵做装置在乘以前一个矩阵做转置的结果。

##### 特殊的矩阵，单位矩阵
![](GameCourse101/2020-03-08-22-07-51.png)
对角阵，只有对角线上有非零的元素，
矩阵的逆：如果你能找到一个矩阵，和原来的矩阵相乘，不管乘得顺序，得到的结果都是I，那么我们就认为这两个矩阵是互逆的。
逆矩阵的计算和转置的矩阵很相似。

##### 向量点乘和叉乘的矩阵形式
![](GameCourse101/2020-03-08-22-12-11.png)
点乘：向量a点乘向量b 等于向量a转置和向量b的乘法。
叉乘：相对点乘困难一些，相当于把向量a转换成一个矩阵（dual matrix）乘以向量b


## 第三节 变换
![](2020-03-14-16-48-49.png)

![](2020-03-14-16-53-27.png)
#### 我们为什么要学习变换：
* Modeling：
位移 旋转 缩放
很多动画就是由各种不同的变换合成在一起形成的。
* Viewing：
![](2020-03-14-16-58-58.png)
光栅化成像涉及到大量的变换。
3D -> 2D 从三维到二维的变换我们叫做投影，这个投影也是一种非常重要的变换，之后会学到。
#### 变换
![](2020-03-14-17-01-01.png)
今天我们的目标就是，把矩阵和变换联系起来。
#### 例子
##### 标准缩放
![](2020-03-14-17-02-15.png)
横轴和纵轴都缩放了0.5，也就是说把任何一个点坐标(X,Y)进行缩放操作0.5倍。
如果用数学形式表示, 可以表示为
![](2020-03-14-17-06-00.png)
如果用矩阵形式表示可以表示为对角矩阵。
![](2020-03-14-17-06-36.png)
是不是这样的，我们可以验证一下。
![](2020-03-14-17-32-25.png)
##### 如果XY的缩放各不相同:
![](2020-03-14-17-34-39.png)
##### 如果是反射（对称）的操作：
![](2020-03-14-17-36-36.png)
等于是Y轴不变，X轴反过来。
##### 如果是切变的操作：
![](2020-03-14-17-39-12.png)
注意这里可以通过一个点的变换前到变换后的变化推导出,Y是不变的，X是变成了X+ay，由x+ay倒推出矩阵.
##### 如果是旋转的操作：
![](2020-03-14-18-00-56.png)
默认是绕(0,0)点旋转，逆时针旋转.
![](2020-03-14-18-00-15.png)
简单的推导：
* 不管再复杂的操作，先找到一个一一对应的关系点，再倒推。
![](2020-03-14-18-13-23.png)
通过（1，0）点的对应关系点配合三角函数可以得到矩阵AC值，那么通过（0，1）点的对应关系点可以找到BC.
##### 变换的共同点
![](2020-03-14-18-33-00.png)
X pu ruai mu = 变换矩阵*X 
这样变换和矩阵的联系就建立起来了，对于一个变换就可以用矩阵来表示。
概念区分： 我们要用一个相同维度的矩阵来乘以向量。

#### 齐次坐标

##### 为什么要学习齐次坐标，为什么要引入这个复杂的东西。
因为平移变换特别特殊。
![](2020-03-14-18-40-34.png)
如果简单的写出来，是挺简单的，但是没有办法转换成矩阵:
![](2020-03-14-18-41-24.png)
所以无奈之下必须要用齐次坐标。
![](2020-03-14-18-42-38.png)
平移操作并不属于一个线性变换（因为线性变换必须等于一个向量等于一个矩阵乘以另外一个向量），但是我们不希望把平移当作一个特殊的情况处理，因为人类总是懒的。所以有没有办法可以把我们提到的所有变换归纳成一个最简单的变换来表示。
tradeoff：权衡.
##### 齐次坐标
![](2020-03-14-19-26-18.png)
如果XY表示点的坐标那就加上1，如果是向量加上0。为什么区别对待?
因为向量具有**平移不变性**：
如果有一个向量经过一个表示平移的矩阵，我们希望它的结果还是XY0.
>向量是个所谓的“过程量”，不依赖于本身的位置。  
![](2020-03-14-19-39-25.png)
1. 如果两个向量相加，结果是新的向量（x1+x2，y1+y2，0+0）有意义。
2. 如果两个点相减（形成一个从被减数指向减数向量）（x1-x2，y1-y2，1-1=0）点减点等于向量，有意义。
3. 如果是点加向量，一个点沿着向量移动到一个新的点上，
（x1+x2，y1+y2，1+0=1）有意义。
4. 一个点加一个点，没意义，扩充的定义。
5. 对于任何的二维点，我们认为，(x/w,y/2,w/w),w!=0(0就是向量了。)
6. 一个点加一个点，表示这两个点的中点。为什么？因为一个点加一个点w会变成2，这个w变成1的过程就是在求中点。

最重要的不是这些变换，而是目的，我们的目的是就是为了把所有的变换写出一个矩阵乘以一个向量的形式。
##### 仿射变换
![](2020-03-14-20-00-24.png)
线性变换+位移，对于类似的变换叫仿射变换。
所有的仿射变换都可以写成齐次坐标这种形式。
验证：
![](2020-03-14-20-03-21.png)
只要表示**仿射变换**最后一行都是001，理论上只用存储上面的部分就行了。

43.46












